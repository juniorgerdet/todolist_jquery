var to=to||{},info=JSON.parse(localStorage.getItem("infoTasks")),info=info||{};
(function(f,d,b){function h(){console.log(Object.keys(d).length);Object.keys(d).length?b(".linot").hide():b(".linot").show()}function g(a){var c=b(".todo-list"),c=b("<li />",{id:"task-"+a.id,data:a.id}).appendTo(c),c=b("<div />",{"class":"view",ondblclick:"to.doneTask("+a.id+")"}).appendTo(c).fadeIn(1E3);b("<span />",{"class":"vignette"}).appendTo(c);b("<label />",{text:a.taskname,"class":a.done?"done noselect":"noselect"}).appendTo(c);b("<input />",{"class":"edit-input",placeholder:"Edit your task...",
onkeypress:"to.saveTask("+a.id+")",onkeyup:"to.saveTask("+a.id+")"}).appendTo(c);b("<button />",{"class":"destroy",onclick:"to.removeTask("+a.id+")"}).appendTo(c);b("<button />",{"class":"edit ion-edit",style:a.done?"display:none":"",onclick:"to.editTask("+a.id+", event)"}).appendTo(c);b(".todo-list").sortable({}).disableSelection()}var e;b("#addnew").click(function(a){b(".linew").fadeIn("fast",function(){b("#input-task").focus();h()})});b("#tasksList").click(function(a){f.Load();b(".linew").fadeOut("fast")});
b("#input-task").blur(function(a){this.value.trim()||b(".linew").fadeOut("fast");h()});b("#form").submit(function(a){var c=this.elements[0];if(c.value){var e=(new Date).getTime(),f={id:e,taskname:c.value,done:!1};d[e]=f;localStorage.setItem("infoTasks",JSON.stringify(d));g(f);b(".linew").hide();c.value=""}a.preventDefault()});f.editTask=function(a){e=b("#task-"+a+" label").text();b("#task-"+a+" .edit").hide();b("#task-"+a+" label").hide();b("#task-"+a+" .edit-input").show().val(e).focus()};f.saveTask=
function(a,c){var g=window.event?window.event:c;13==g.keyCode&&(e=b("#task-"+a+" .edit-input").val(),b("#task-"+a+" .edit-input").hide().val(""),b("#task-"+a+" .edit").removeAttr("style"),b("#task-"+a+" label").text(e).show(),b("#task-"+a).toggleClass("two"),d[a].taskname=e,localStorage.setItem("infoTasks",JSON.stringify(d)),setTimeout(function(){b("#task-"+a).removeClass("two")},700),e="");27==g.keyCode&&f.removeTask(a);h()};f.doneTask=function(a){b("#task-"+a+" label").hasClass("done")?(d[a].done=
!1,localStorage.setItem("infoTasks",JSON.stringify(d)),b("#task-"+a+" .edit").removeAttr("style"),b("#task-"+a+" label").removeClass("done")):(d[a].done=!0,localStorage.setItem("infoTasks",JSON.stringify(d)),b("#task-"+a+" label").addClass("done"),b("#task-"+a+" .edit").css("display","none"))};f.removeTask=function(a){b("#task-"+a+" label").is(":visible")?(delete d[a],localStorage.setItem("infoTasks",JSON.stringify(d)),b("#task-"+a).remove()):(b("#task-"+a+" .edit-input").hide().val(""),b("#task-"+
a+" .edit").removeAttr("style"),e=b("#task-"+a+" label").text(),b("#task-"+a+" label").text(e).show(),e="");h()};f.Load=function(){Object.keys(d).length?b.each(d,function(a,b){g(b)}):b(".linot").show()}})(to,info,jQuery);